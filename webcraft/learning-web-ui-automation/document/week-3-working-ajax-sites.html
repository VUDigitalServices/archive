<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="p2pu" xml:lang="p2pu">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Learning Web UI Automation | P2PU Archive</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
<link rel="shortcut icon" href="../../../sites/archive.p2pu.org/themes/p2pu10/favicon.ico" type="image/x-icon" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/archive.p2pu.org/modules/codefilter/codefilter.css@I.css" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/archive.p2pu.org/files/ctools/css/132cbcbd66da15052e9a590dbb4eca76.css@I.css" />
<link type="text/css" rel="stylesheet" media="screen" href="../../../sites/archive.p2pu.org/modules/popup/popup.css@I.css" />
<link type="text/css" rel="stylesheet" media="screen" href="../../../sites/archive.p2pu.org/modules/popup/styles/Soft&#32;grey&#32;frame/popup-style.css@I.css" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/archive.p2pu.org/files/css/css_53b6992323d5f617d777bef7b197cc5a.css" />
<link type="text/css" rel="stylesheet" media="screen" href="../../../sites/archive.p2pu.org/files/css/css_23213a44f12b0d9125523bb3c342e2a6.css" />
<script type="text/javascript" src="../../../sites/archive.p2pu.org/files/js/js_f9571e8f689e0561a88ad14078625551.js"></script>
<script type="text/javascript" src="../../../sites/archive.p2pu.org/modules/popup/popup.js@1382771393"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "/", "chartbeat": { "uid": 10678, "domain": "p2pu.org" }, "dhtmlMenu": { "slide": "slide", "doubleclick": "doubleclick", "siblings": 0, "relativity": 0, "children": 0, "clone": 0 }, "extlink": { "extTarget": 0, "extClass": "ext", "extSubdomains": 1, "extExclude": "", "extInclude": "", "extAlert": 0, "extAlertText": "This link will take you to an external web site. We are not responsible for their content.", "mailtoClass": "mailto" }, "popup": { "hoverLinger": "250" }, "views": { "ajax_path": [ "/webcraft/views/ajax", "/webcraft/views/ajax" ], "ajaxViews": [ { "view_name": "panel_comments", "view_display_id": "default", "view_args": "node/14802/document/26177", "view_path": "node/14802/document/26177", "view_base_path": null, "view_dom_id": 1, "pager_element": 0 }, { "view_name": "course_documents_arg", "view_display_id": "block_2", "view_args": "14802", "view_path": "node/14802/document/26177", "view_base_path": null, "view_dom_id": 2, "pager_element": 0 } ] }, "og": { "group_context": { "nid": "14802", "title": "Learning Web UI Automation", "type": "course" } } });
//--><!]]>
</script>
</head>

<body class="not-front not-logged-in page-node no-sidebars p2pu-context-course-section-webcraft og-context og-context-14802  ">

  <div id="page">
     <!--style = "display:none;"-->
      <div id="top-notification" class="p2pu-notification">
        <p>This is the P2PU Archive. If you want the current site, go to <a href="http://www.p2pu.org" rel="nofollow">www.p2pu.org!</a></p>
      </div>     
      <div id="page-header" class="float-container">

        <div id="logo"><a title="webcraft Home" href="../../../webcraft.1.html"><img alt="P2PU Home" src="../../../sites/archive.p2pu.org/themes/p2pu10/images/logos/logo-section-webcraft.png"></a></div>
        <div id="slogan"></div>
        <div id="region-header"></div>

              </div><!-- /page-header -->

      <div id="navigation">
        <div class="primary">  <div id="block-menu-menu-webcraft" class="block block-menu">
<!-- wrappers -->


  <div class="content"><ul class="menu"><li class="leaf first dhtml-menu "><a href="../../../index.html" title="P2PU home page" id="dhtml_menu-17129"><span>P2PU Home</span></a></li>
<li class="leaf last dhtml-menu "><a href="../../course/list.html" title="Webcraft course listing." id="dhtml_menu-17128"><span>Courses</span></a></li>
</ul></div>
  
<!-- /wrappers -->
</div></div>        <form action="week-3-working-ajax-sites.html"  accept-charset="UTF-8" method="post" id="search-theme-form">
<div><div id="search" class="container-inline">
  <div class="form-item" id="edit-search-theme-form-1-wrapper">
 <label for="edit-search-theme-form-1">Search this site: </label>
 <input type="text" maxlength="128" name="search_theme_form" id="edit-search-theme-form-1" size="15" value="" title="Enter the terms you wish to search for." class="form-text" />
</div>
<input type="submit" name="op" id="edit-submit" value="Search"  class="form-submit" />
<input type="hidden" name="form_build_id" id="form-818094d9fbcb8228dc2388312ccf65e7" value="form-818094d9fbcb8228dc2388312ccf65e7"  />
<input type="hidden" name="form_id" id="edit-search-theme-form" value="search_theme_form"  />
</div>

</div></form>
      </div><!-- /Navigation -->

      <div id="page-sub-header"></div>

      <div id="page-body" class="float-container page-body-top">
        <div id="page-sub-body">
  
          <div id="content-column">
            <div class="inner">
                            
              <h1 class="title">Learning Web UI Automation</h1>                                                        <div class="tabs float-container"><ul class="tabs primary">
<li ><a href="../../learning-web-ui-automation.html"><span>Course Home</span></a></li>
<li class="active" ><a href="../../node/14802/document.html"><span>Course Material</span></a></li>
<li ><a href="../../node/14802/forums.html"><span>Forums</span></a></li>
</ul>
</div>                            <div class="panel-flexible panels-flexible-17 clear-block" >
<div class="panel-flexible-inside panels-flexible-17-inside">
<div class="panels-flexible-region panels-flexible-region-17-left panels-flexible-region-first">
  <div class="inside panels-flexible-region-inside panels-flexible-region-17-left-inside panels-flexible-region-inside-first">
<div class="panel-pane pane-views pane-course-documents-arg grey-panel" >
  <div class="pane-inner">
      
          <h2 class="pane-title">Course Material</h2>
      
      
    <div class="pane-content">
      <div class="view view-course-documents-arg view-id-course_documents_arg view-display-id-block_2 view-dom-id-2">
    
  
  
      <div class="view-content">
      <div class="item-list">
    <ul>
          <li class="views-row views-row-1 views-row-odd views-row-first">  
  <span class="views-field-title">
                <span class="field-content"><a href="recommended-reading.html">Recommended Reading</a></span>
  </span>
  
  <span class="views-field-edit-node">
                <span class="field-content"></span>
  </span>
</li>
          <li class="views-row views-row-2 views-row-even">  
  <span class="views-field-title">
                <span class="field-content"><a href="../../document/syllabus-learning-web-ui-automation.html">Syllabus for Learning Web UI Automation</a></span>
  </span>
  
  <span class="views-field-edit-node">
                <span class="field-content"></span>
  </span>
</li>
          <li class="views-row views-row-3 views-row-odd">  
  <span class="views-field-title">
                <span class="field-content"><a href="week-1-automation-basics-and-locators.html">Week 1 - Automation Basics and Locators</a></span>
  </span>
  
  <span class="views-field-edit-node">
                <span class="field-content"></span>
  </span>
</li>
          <li class="views-row views-row-4 views-row-even">  
  <span class="views-field-title">
                <span class="field-content"><a href="week-2-interacting-elements-page.html">Week 2 - Interacting with Elements on the page</a></span>
  </span>
  
  <span class="views-field-edit-node">
                <span class="field-content"></span>
  </span>
</li>
          <li class="views-row views-row-5 views-row-odd">  
  <span class="views-field-title">
                <span class="field-content"><a href="week-3-working-ajax-sites.html">Week 3 - Working with AJAX sites</a></span>
  </span>
  
  <span class="views-field-edit-node">
                <span class="field-content"></span>
  </span>
</li>
          <li class="views-row views-row-6 views-row-even">  
  <span class="views-field-title">
                <span class="field-content"><a href="week-4-pattern-matching.html">Week 4 - Pattern Matching</a></span>
  </span>
  
  <span class="views-field-edit-node">
                <span class="field-content"></span>
  </span>
</li>
          <li class="views-row views-row-7 views-row-odd">  
  <span class="views-field-title">
                <span class="field-content"><a href="week-5-javascript-execution.html">Week 5 - JavaScript Execution</a></span>
  </span>
  
  <span class="views-field-edit-node">
                <span class="field-content"></span>
  </span>
</li>
          <li class="views-row views-row-8 views-row-even views-row-last">  
  <span class="views-field-title">
                <span class="field-content"><a href="week-6-writing-maintainable-tests.html">Week 6 - Writing Maintainable Tests</a></span>
  </span>
  
  <span class="views-field-edit-node">
                <span class="field-content"></span>
  </span>
</li>
      </ul>
</div>    </div>
  
  
  
  
  
  
</div>     </div>
  
      
      </div>  
</div>
  </div>
</div>
<div class="panels-flexible-region panels-flexible-region-17-center panels-flexible-region-last ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-17-center-inside panels-flexible-region-inside-last">
<div class="panel-pane pane-node" >
  <div class="pane-inner">
      
          <h2 class="pane-title">Week 3 - Working with AJAX sites</h2>
      
      
    <div class="pane-content">
      <div id="node-26177" class="node node-document clear-block">

  <h2 class="title"><a href="week-3-working-ajax-sites.html" title=""></a></h2>

  <div class="meta">
    <div class="picture">
  <a href="../../../users/automatedtester.html" title="View user profile."><img src="../../../sites/archive.p2pu.org/files/imagecache/user_default_image/pictures/picture-8770.jpg" alt="David Burns&#039;s picture" title="View user profile."  class="imagecache imagecache-user_default_image" width="30" height="30" /></a></div>
    <span class="created-date">Thu, 2011-02-10 19:05</span>
  </div>

  <div class="content">
    <div class="field field-type-text field-field-document-body">
    <div class="field-items">
            <div class="field-item odd">
                    <p>Web applications are increasingly moving towards having AJAX. It&#39;s quite ubiquitous for web applications to have it these days. This means that when our tests run we need to have mechanisms that allow our tests to synchronize with what is happening on the browser. To do this we can build our own wait methods to or we can use some of the built in methods.</p>
<p>There is only one thing that Selenium will implicitly wait for. This is when we call open(path). It will wait for the page to load but if the page as some JavaScript that then executes onLoad to create new elements on the page we might not be able to work with them straight away.</p>
<p>Let&#39;s dive into how we do this now.</p>
<p><strong> wait_for_page_to_load(timeout)</strong></p>
<p>Links are the most common way to navigate around a site. We do this by clicking on them. In the case that a link causes<br />
a new page to load Selenium has a simple solution to wait for the next page. There is an API call<br />
wait_for_page_to_load(). This takes one paramater, a string, that represents how long it should wait for before giving<br />
up. The value of seconds is represented in milliseconds to take how long it should wait in seconds and multiply by 1000<br />
to get the value in milliseconds.</p>
<p>The usual scenario is to wait for 30 seconds, if it hasn&#39;t loaded then raise an exception.</p>
<p>An example would be</p>
<pre>
 selenium.wait_for_page_to_load(&quot;30000&quot;)</pre><p>
<strong>wait_for_frame_to_load(frameLocator, timeout)</strong></p>
<p>A similar call is wait_for_frame_to_load except that it works against 1 frame on the page. An example of this is if you<br />
have a site that uses frame to do layout. On the left are links that will allow you to navigate the site by changing the<br />
contents of the central frame. our test script would look something like this</p>
<pre>
selenium.click(&quot;link=foo&quot;)
selenium.wait_for_frame_to_load(&quot;mainFrame&quot;, &quot;30000&quot;)
</pre><p>Frames are becoming increasingly uncommon so you will hardly use this. As a side note, they have been deprecated as of HTML5.</p>
<p><strong> wait_for_condition(&quot;javascript snippet&quot;)</strong></p>
<p>This is the most common wait command used when working with applications using AJAX. Wait for Condition allows us to pass through a JavaScript snippet to interrogate the App Under Test. Wait for condition needs to have a condition that needs to be met in JavaScript. If you have a multiline snippet of JavaScript, splitting lines with semi-colons, then the last line needs to have the conditional.</p>
<p>The other item that is needed is a way to access the DOM. We do this by using<br />
<em> selenium.browserbot.getUserWindow().document</em>. I will go into more depth with this in a future lecture.</p>
<p>So if you are working with a jQuery DatePicker widget you would have to have something like the code below to wait for it to be fully rendered</p>
<pre>
 self.selenium.wait_for_condition(&quot;&quot;&quot;selenium.
                                browserbot.
                                getCurrentWindow().
                                document.getElementById(&#39;ui-datepicker-div&#39;).scrollWidth == 251&quot;&quot;&quot;, 10000)</pre><p>
The next approach that is commonly seen is by rolling your wait for commands.</p>
<p>These are simple loops that rely on the is_* API calls that are available. An example of this can be seen below</p>
<pre>
def wait_for_element_present(self, element):
    count = 0
    while not self.selenium.is_present(element):
        time.sleep(1)
        count += 1
        if count == 30:
            raise Exception(element + &#39; has not loaded&#39;)
</pre><p>At Mozilla we use a mixture of the wait for commands because they all serve a purpose in the right places.</p>
<p>
<strong>Task</strong></p>
<p>This week I want you to try working against another one of Mozilla&#39;s staging servers. Input is a project that allows people to feedback to Mozilla what they think of the current version of Firefox. What I would like you to do write a test that clicks on the check box for Russian and then checks that language is the only language available to select and then deselects it.</p>
<pre>

from selenium import selenium
import unittest

class TestInputStageSite(unittest.TestCase):

    def setUp(self):
        self.selenium = selenium(&quot;localhost&quot;, 4444, 
                                 &quot;*firefox&quot;, &quot;http://input.stage.mozilla.com&quot;)
        self.selenium.start()
        self.selenium.open(&quot;/&quot;)
        self.selenium.window_maximize()

    def tearDown(self):
        self.selenium.stop()

    def test_that_clicking_on_a_language_checkbox_makes_other_language_choices_disappear(self):
        # Insert your test here
        pass</pre><p>
As always please email me your answers. If you need help please feel free to email me or get me on irc at<br />
irc.mozilla.org in the #mozwebqa channel or on irc.freenode.net in the #Selenium channel!</p>
        </div>
        </div>
</div>
  </div>
  

<ul class="links inline"><li class="p2pu_revisions first last"><a href="../../node/26177/revisions@destination=node%252F14802%252Fdocument%252F26177.html">revisions</a></li>
</ul>
</div>
    </div>
  
      
      </div>  
</div>
  </div>
</div>
</div>
</div>
                                        </div>
          </div><!-- /content-column -->
  
                  </div>
        
                  
      </div><!-- /page-body -->
  
              <div id="page-footer">
          <div class="inner">
            <div class="message">
                            <div id='creative-commons'>
                <div class='p2pu-cc-text'>
                  <a href="../../../license.html">License Information</a> - <a href="../../../privacy.html">Privacy Guidelines</a> - <a href="../../../terms-of-use.html">Terms of Use</a>
                </div><br>
<div id='cc-logo'>

<a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license" target="_blank"><img alt="Creative Commons License" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
               <div class="p2pu-cc-text">Except where otherwise noted, all content on <span dct="http://purl.org/dc/terms/" property="title">p2pu.org</span> is
licensed under a <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license" target="_blank">Creative Commons Attribution-ShareAlike 3.0 Unported
License</a>.</div>

                </div>
              </div>             </div>
              <div id="block-user_voice-0" class="block block-user_voice">
<!-- wrappers -->

  <h2 class="title"><none></h2>
  <div class="content"><script type="text/javascript">
var uservoiceJsHost = ("https:" == document.location.protocol) ? "https://uservoice.com" : "http://cdn.uservoice.com";
document.write(unescape("%3Cscript src='" + uservoiceJsHost + "/javascripts/widgets/tab.js' type='text/javascript'%3E%3C/script%3E"))
</script>
<script type="text/javascript">
UserVoice.Tab.show({ 
  key: 'p2pu',
  host: 'p2pu.uservoice.com', 
  forum: '47491', 
  alignment: 'left',
  background_color:'#F00', 
  text_color: 'white',
  hover_color: '#06C',
  lang: 'en'
})
</script></div>
  
<!-- /wrappers -->
</div>          </div>
        </div>
      
  </div><!-- /page -->
  
  <script type="text/javascript">
  var _sf_async_config=Drupal.settings.chartbeat;
  (function(){
    function loadChartbeat() {
      window._sf_endpt=(new Date()).getTime();
      var e = document.createElement('script');
      e.setAttribute('language', 'javascript');
      e.setAttribute('type', 'text/javascript');
      e.setAttribute('src',
         (("https:" == document.location.protocol) ? "https://s3.amazonaws.com/" : "http://") +
         "static.chartbeat.com/js/chartbeat.js");
      document.body.appendChild(e);
    }
    var oldonload = window.onload;
    window.onload = (typeof window.onload != 'function') ?
       loadChartbeat : function() { oldonload(); loadChartbeat(); };
  })();
</script>
<!--[if lt IE 8]><style type="text/css">div.popup-element{ display: inline;}</style><![endif]-->
</body>
</html>

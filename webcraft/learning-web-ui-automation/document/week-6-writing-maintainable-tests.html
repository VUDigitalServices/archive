<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="p2pu" xml:lang="p2pu">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Learning Web UI Automation | P2PU Archive</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
<link rel="shortcut icon" href="../../../sites/archive.p2pu.org/themes/p2pu10/favicon.ico" type="image/x-icon" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/archive.p2pu.org/modules/codefilter/codefilter.css@I.css" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/archive.p2pu.org/files/ctools/css/132cbcbd66da15052e9a590dbb4eca76.css@I.css" />
<link type="text/css" rel="stylesheet" media="screen" href="../../../sites/archive.p2pu.org/modules/popup/popup.css@I.css" />
<link type="text/css" rel="stylesheet" media="screen" href="../../../sites/archive.p2pu.org/modules/popup/styles/Soft&#32;grey&#32;frame/popup-style.css@I.css" />
<link type="text/css" rel="stylesheet" media="all" href="../../../sites/archive.p2pu.org/files/css/css_53b6992323d5f617d777bef7b197cc5a.css" />
<link type="text/css" rel="stylesheet" media="screen" href="../../../sites/archive.p2pu.org/files/css/css_23213a44f12b0d9125523bb3c342e2a6.css" />
<script type="text/javascript" src="../../../sites/archive.p2pu.org/files/js/js_f9571e8f689e0561a88ad14078625551.js"></script>
<script type="text/javascript" src="../../../sites/archive.p2pu.org/modules/popup/popup.js@1381231159"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "/", "chartbeat": { "uid": 10678, "domain": "p2pu.org" }, "dhtmlMenu": { "slide": "slide", "doubleclick": "doubleclick", "siblings": 0, "relativity": 0, "children": 0, "clone": 0 }, "extlink": { "extTarget": 0, "extClass": "ext", "extSubdomains": 1, "extExclude": "", "extInclude": "", "extAlert": 0, "extAlertText": "This link will take you to an external web site. We are not responsible for their content.", "mailtoClass": "mailto" }, "popup": { "hoverLinger": "250" }, "views": { "ajax_path": [ "/webcraft/views/ajax", "/webcraft/views/ajax" ], "ajaxViews": [ { "view_name": "panel_comments", "view_display_id": "default", "view_args": "node/14802/document/27376", "view_path": "node/14802/document/27376", "view_base_path": null, "view_dom_id": 1, "pager_element": 0 }, { "view_name": "course_documents_arg", "view_display_id": "block_2", "view_args": "14802", "view_path": "node/14802/document/27376", "view_base_path": null, "view_dom_id": 2, "pager_element": 0 } ] }, "og": { "group_context": { "nid": "14802", "title": "Learning Web UI Automation", "type": "course" } } });
//--><!]]>
</script>
</head>

<body class="not-front not-logged-in page-node no-sidebars p2pu-context-course-section-webcraft og-context og-context-14802  ">

  <div id="page">
     <!--style = "display:none;"-->
      <div id="top-notification" class="p2pu-notification">
        <p>This is the P2PU Archive. If you want the current site, go to <a href="http://www.p2pu.org" rel="nofollow">www.p2pu.org!</a></p>
      </div>     
      <div id="page-header" class="float-container">

        <div id="logo"><a title="webcraft Home" href="../../../webcraft.1.html"><img alt="P2PU Home" src="../../../sites/archive.p2pu.org/themes/p2pu10/images/logos/logo-section-webcraft.png"></a></div>
        <div id="slogan"></div>
        <div id="region-header"></div>

              </div><!-- /page-header -->

      <div id="navigation">
        <div class="primary">  <div id="block-menu-menu-webcraft" class="block block-menu">
<!-- wrappers -->


  <div class="content"><ul class="menu"><li class="leaf first dhtml-menu "><a href="../../../index.html" title="P2PU home page" id="dhtml_menu-17129"><span>P2PU Home</span></a></li>
<li class="leaf last dhtml-menu "><a href="../../course/list.html" title="Webcraft course listing." id="dhtml_menu-17128"><span>Courses</span></a></li>
</ul></div>
  
<!-- /wrappers -->
</div></div>        <form action="week-6-writing-maintainable-tests.html"  accept-charset="UTF-8" method="post" id="search-theme-form">
<div><div id="search" class="container-inline">
  <div class="form-item" id="edit-search-theme-form-1-wrapper">
 <label for="edit-search-theme-form-1">Search this site: </label>
 <input type="text" maxlength="128" name="search_theme_form" id="edit-search-theme-form-1" size="15" value="" title="Enter the terms you wish to search for." class="form-text" />
</div>
<input type="submit" name="op" id="edit-submit" value="Search"  class="form-submit" />
<input type="hidden" name="form_build_id" id="form-994c1270e7bf08bfc05c1fe9a17108ca" value="form-994c1270e7bf08bfc05c1fe9a17108ca"  />
<input type="hidden" name="form_id" id="edit-search-theme-form" value="search_theme_form"  />
</div>

</div></form>
      </div><!-- /Navigation -->

      <div id="page-sub-header"></div>

      <div id="page-body" class="float-container page-body-top">
        <div id="page-sub-body">
  
          <div id="content-column">
            <div class="inner">
                            
              <h1 class="title">Learning Web UI Automation</h1>                                                        <div class="tabs float-container"><ul class="tabs primary">
<li ><a href="../../learning-web-ui-automation.html"><span>Course Home</span></a></li>
<li class="active" ><a href="../../node/14802/document.html"><span>Course Material</span></a></li>
<li ><a href="../../node/14802/forums.html"><span>Forums</span></a></li>
</ul>
</div>                            <div class="panel-flexible panels-flexible-17 clear-block" >
<div class="panel-flexible-inside panels-flexible-17-inside">
<div class="panels-flexible-region panels-flexible-region-17-left panels-flexible-region-first">
  <div class="inside panels-flexible-region-inside panels-flexible-region-17-left-inside panels-flexible-region-inside-first">
<div class="panel-pane pane-views pane-course-documents-arg grey-panel" >
  <div class="pane-inner">
      
          <h2 class="pane-title">Course Material</h2>
      
      
    <div class="pane-content">
      <div class="view view-course-documents-arg view-id-course_documents_arg view-display-id-block_2 view-dom-id-2">
    
  
  
      <div class="view-content">
      <div class="item-list">
    <ul>
          <li class="views-row views-row-1 views-row-odd views-row-first">  
  <span class="views-field-title">
                <span class="field-content"><a href="recommended-reading.html">Recommended Reading</a></span>
  </span>
  
  <span class="views-field-edit-node">
                <span class="field-content"></span>
  </span>
</li>
          <li class="views-row views-row-2 views-row-even">  
  <span class="views-field-title">
                <span class="field-content"><a href="../../document/syllabus-learning-web-ui-automation.html">Syllabus for Learning Web UI Automation</a></span>
  </span>
  
  <span class="views-field-edit-node">
                <span class="field-content"></span>
  </span>
</li>
          <li class="views-row views-row-3 views-row-odd">  
  <span class="views-field-title">
                <span class="field-content"><a href="week-1-automation-basics-and-locators.html">Week 1 - Automation Basics and Locators</a></span>
  </span>
  
  <span class="views-field-edit-node">
                <span class="field-content"></span>
  </span>
</li>
          <li class="views-row views-row-4 views-row-even">  
  <span class="views-field-title">
                <span class="field-content"><a href="week-2-interacting-elements-page.html">Week 2 - Interacting with Elements on the page</a></span>
  </span>
  
  <span class="views-field-edit-node">
                <span class="field-content"></span>
  </span>
</li>
          <li class="views-row views-row-5 views-row-odd">  
  <span class="views-field-title">
                <span class="field-content"><a href="week-3-working-ajax-sites.html">Week 3 - Working with AJAX sites</a></span>
  </span>
  
  <span class="views-field-edit-node">
                <span class="field-content"></span>
  </span>
</li>
          <li class="views-row views-row-6 views-row-even">  
  <span class="views-field-title">
                <span class="field-content"><a href="week-4-pattern-matching.html">Week 4 - Pattern Matching</a></span>
  </span>
  
  <span class="views-field-edit-node">
                <span class="field-content"></span>
  </span>
</li>
          <li class="views-row views-row-7 views-row-odd">  
  <span class="views-field-title">
                <span class="field-content"><a href="week-5-javascript-execution.html">Week 5 - JavaScript Execution</a></span>
  </span>
  
  <span class="views-field-edit-node">
                <span class="field-content"></span>
  </span>
</li>
          <li class="views-row views-row-8 views-row-even views-row-last">  
  <span class="views-field-title">
                <span class="field-content"><a href="week-6-writing-maintainable-tests.html">Week 6 - Writing Maintainable Tests</a></span>
  </span>
  
  <span class="views-field-edit-node">
                <span class="field-content"></span>
  </span>
</li>
      </ul>
</div>    </div>
  
  
  
  
  
  
</div>     </div>
  
      
      </div>  
</div>
  </div>
</div>
<div class="panels-flexible-region panels-flexible-region-17-center panels-flexible-region-last ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-17-center-inside panels-flexible-region-inside-last">
<div class="panel-pane pane-node" >
  <div class="pane-inner">
      
          <h2 class="pane-title">Week 6 - Writing Maintainable Tests</h2>
      
      
    <div class="pane-content">
      <div id="node-27376" class="node node-document clear-block">

  <h2 class="title"><a href="week-6-writing-maintainable-tests.html" title=""></a></h2>

  <div class="meta">
    <div class="picture">
  <a href="../../../users/automatedtester.html" title="View user profile."><img src="../../../sites/archive.p2pu.org/files/imagecache/user_default_image/pictures/picture-8770.jpg" alt="David Burns&#039;s picture" title="View user profile."  class="imagecache imagecache-user_default_image" width="30" height="30" /></a></div>
    <span class="created-date">Wed, 2011-03-09 20:55</span>
  </div>

  <div class="content">
    <div class="field field-type-text field-field-document-body">
    <div class="field-items">
            <div class="field-item odd">
                    <p>In this final lecture we are going to have a look at how we can start making maintainable. This is extremely important when we start writing lots of tests as it abstracts away Selenium from the tests. By abstracting it away from the tests we can start writing extremely readable tests.</p>
<p>The upside to making extremely readable tests, as in making extremely readable code, is that you start removing duplication making your test code DRY. DRY stands for Don&#39;t Repeat Yourself. The other benefit, if done properly, is that you can start creating a Domain Specific Langauge (DSL) that both technical and non-technical people can read. Getting non-technical people writing automated tests means that everyone within a business can start adding testing value.</p>
<p>So what is the most common approach to doing this?</p>
<p><strong>Page Object Model</strong></p>
<p>There is a design pattern called Page Object Model which says that we should be developing our tests using good OO development techniques. The main idea is to have 1 object for every page that you work against. When you transition from one page to another you should get a new object. When you move from each object to the other you should always pass the Selenium, or any other browser framework, to the new place.</p>
<p>So how would that look in python?</p>
<p>If we have site.py as the module for our site we could have 2 classes.</p>
<pre>

class Login(object):

    def __init__(self, selenium):
        self.selenium = selenium

class PageAfterLogin(object):

    def __init__(self, selenium):
        self.selenium = selenium</pre><p>&nbsp;&nbsp; &nbsp;<br />
The <em>__init__</em> method is a constructor. In Java/.NET it would be a method with the same name as the object. We can see that it accepts a Selenium object, that we create in our tests, and then we can do things within our newly created objects.</p>
<p>So let&#39;s see an example of a page object in action.</p>
<p>The code below is our test code</p>
<pre>
test_login_details.py

import unittest
import site

class LoginTests(unittest.TestCase):

    def setUp(self):
        self.selenium = selenium(&quot;localhost&quot;, 4444,
                                &quot;*firefox&quot;, &quot;http://mysite&quot;)
        self.selenium.start()
        self.selenium.window_maximize()

    def tearDown(self):
        self.selenium.stop()

    def test_that_we_login(self):
        login = site.Login(self.selenium)
        second_page = login.as(username, password)</pre><p>
As you can see we have started making our code readable by making methods called as().</p>
<p><strong>What about our locators?</strong></p>
<p>Well, if we apply DRY to our Page Objects we will see that placing our locators in a variable and then using that variable will make our code cleaner. It also means that if a locator changes we can update it in one place and everywhere that a test relied on that locator, which is probably failing at that point, will suddenly pass.</p>
<p><strong>Asserts</strong></p>
<p>Tests rely on their assert methods so the question that we need to answer is do we put the asserts in the Page Objects or in the tests themselves?</p>
<p>The answer is to always put them in the tests themselves and never in the Page Objects. The reasoning behind this is that if a test fails we can see the stacktrace that is normally shown, starting at the assert and then showing us the lines that got us there.</p>
<p>Putting them in the Page Objects creates a bit of a smoke screen. When running our tests it will suddenly fail and the test runner will not be able put any meaning info to the screen. Adding them to the tests also shows intent in the tests making it more readable for any one else coming to have a look at the test.</p>
<pre>
import unittest
import site

class LoginTests(unittest.TestCase):

    def setUp(self):
        self.selenium = selenium(&quot;localhost&quot;, 4444,
                                &quot;*firefox&quot;, &quot;http://mysite&quot;)
        self.selenium.start()
        self.selenium.window_maximize()

    def tearDown(self):
        self.selenium.stop()

    def test_that_we_login(self):
        login = site.Login(self.selenium)
        second_page = login.as(username, password)
        second_page.search_for(&quot;my marbles&quot;)
        self.assertTrue(second_page.has_text(&quot;my marbles&quot;)</pre><p>
There is no real right way to do things but you can easily spot if you are not doing something right if it hampers the readability of your tests.</p>
<p>I am also a .NET dev in my spare time and have created this example.</p>
<pre>
    [Test]
    public void ShouldLoadHomeThenGoToXpathTutorial()
    {
        Home home = new Home(selenium);
        SeleniumTutorials seleniumTutorials = home.ClickSelenium();
        SeleniumXPathTutorial seleniumXPathTutorial = seleniumTutorials.ClickXpathTutorial();
        Assert.True(seleniumXPathTutorial.
                    IsInputOnScreen(SeleniumXPathTutorial.FirstInput));
        Assert.True(seleniumXPathTutorial
                    .IsInputOnScreen(SeleniumXPathTutorial.SecondInput));
        Assert.True(seleniumXPathTutorial
                    .IsInputOnScreen(SeleniumXPathTutorial.Total));
    }</pre><p>
We can see that, without having to know C#, we can easily read this test.</p>
<p><strong>Task</strong></p>
<p>This weeks task is to create a test, ideally one from <a href="https://litmus.mozilla.org/show_test.cgi?searchType=by_category&amp;product_id=8&amp;branch_id=18&amp;testgroup_id=216&amp;subgroup_id=1574" title="https://litmus.mozilla.org/show_test.cgi?searchType=by_category&amp;product_id=8&amp;branch_id=18&amp;testgroup_id=216&amp;subgroup_id=1574" rel="nofollow">https://litmus.mozilla.org/show_test.cgi?searchType=by_category&amp;product_...</a> that doesnt require any logging in, that shows how you would do it.</p>
<p>As a bonus, for me and you, if you want to have your test used by Mozilla I suggest forking <a href="https://github.com/AutomatedTester/Addon-Tests" title="https://github.com/AutomatedTester/Addon-Tests" rel="nofollow">https://github.com/AutomatedTester/Addon-Tests</a> and then doing a pull request so that we can use it. Your name can be added to the contributors section of the files you work on or create.</p>
<p>As always please email me your answers. If you need help please feel free to email me or get me on irc at irc.mozilla.org in the #mozwebqa channel or on irc.freenode.net in the #Selenium channel!</p>
        </div>
        </div>
</div>
  </div>
  

<ul class="links inline"><li class="p2pu_revisions first last"><a href="../../node/27376/revisions@destination=node%252F14802%252Fdocument%252F27376.html">revisions</a></li>
</ul>
</div>
    </div>
  
      
      </div>  
</div>
  </div>
</div>
</div>
</div>
                                        </div>
          </div><!-- /content-column -->
  
                  </div>
        
                  
      </div><!-- /page-body -->
  
              <div id="page-footer">
          <div class="inner">
            <div class="message">
                            <div id='creative-commons'>
                <div class='p2pu-cc-text'>
                  <a href="../../../license.html">License Information</a> - <a href="../../../privacy.html">Privacy Guidelines</a> - <a href="../../../terms-of-use.html">Terms of Use</a>
                </div><br>
<div id='cc-logo'>

<a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license" target="_blank"><img alt="Creative Commons License" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a>
               <div class="p2pu-cc-text">Except where otherwise noted, all content on <span dct="http://purl.org/dc/terms/" property="title">p2pu.org</span> is
licensed under a <a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license" target="_blank">Creative Commons Attribution-ShareAlike 3.0 Unported
License</a>.</div>

                </div>
              </div>             </div>
              <div id="block-user_voice-0" class="block block-user_voice">
<!-- wrappers -->

  <h2 class="title"><none></h2>
  <div class="content"><script type="text/javascript">
var uservoiceJsHost = ("https:" == document.location.protocol) ? "https://uservoice.com" : "http://cdn.uservoice.com";
document.write(unescape("%3Cscript src='" + uservoiceJsHost + "/javascripts/widgets/tab.js' type='text/javascript'%3E%3C/script%3E"))
</script>
<script type="text/javascript">
UserVoice.Tab.show({ 
  key: 'p2pu',
  host: 'p2pu.uservoice.com', 
  forum: '47491', 
  alignment: 'left',
  background_color:'#F00', 
  text_color: 'white',
  hover_color: '#06C',
  lang: 'en'
})
</script></div>
  
<!-- /wrappers -->
</div>          </div>
        </div>
      
  </div><!-- /page -->
  
  <script type="text/javascript">
  var _sf_async_config=Drupal.settings.chartbeat;
  (function(){
    function loadChartbeat() {
      window._sf_endpt=(new Date()).getTime();
      var e = document.createElement('script');
      e.setAttribute('language', 'javascript');
      e.setAttribute('type', 'text/javascript');
      e.setAttribute('src',
         (("https:" == document.location.protocol) ? "https://s3.amazonaws.com/" : "http://") +
         "static.chartbeat.com/js/chartbeat.js");
      document.body.appendChild(e);
    }
    var oldonload = window.onload;
    window.onload = (typeof window.onload != 'function') ?
       loadChartbeat : function() { oldonload(); loadChartbeat(); };
  })();
</script>
<!--[if lt IE 8]><style type="text/css">div.popup-element{ display: inline;}</style><![endif]-->
</body>
</html>
